##### ~/.tmux.conf ########################################################
# Autor: ChatGPT ¬∑ 2025‚Äë04‚Äë17
# Descripci√≥n: configuraci√≥n todo‚Äëterreno para tmux ‚â•¬†3.2
############################################################################

########## 1. Ajustes b√°sicos #############################################
set -g mouse on                       # Captura total del rat√≥n
set -ga terminal-overrides ",*:RGB"   # True‚Äëcolor en cualquier terminal
set -g focus-events on                # Env√≠a focus‚Äëin/out a los panes (√∫til p/ Vim/Neovim)
set -g history-limit 100000           # Buffer de scroll gigante
set -sg escape-time 0                 # Elimina retardo tras pulsar Esc

########## 2. Bordes y t√≠tulos de panes ###################################
set -g pane-border-status top                 # Muestra t√≠tulo encima del pane
set -g pane-border-style  fg=colour238
set -g pane-active-border-style "fg=colour39,bold"
setw -g automatic-rename-format '#{pane_title}: #{pane_current_command}'

# Oculta los t√≠tulos si la ventana solo tiene un pane
run-shell -b 'tmux set-hook -g pane-focus-in "run-shell \"[ \\#{window_panes} -gt 1 ] && tmux set -w pane-border-status top || tmux set -w pane-border-status off\""'


########## 3. Barra de estado #############################################
set -g status-interval 5
set -g status-style bg=default,fg=colour247
set -g status-left  "#[bold]#S "                     # Nombre de la sesi√≥n
set -g status-right "#(uptime -p | cut -c4-) | #{battery_percentage}üîã | %R %d-%b"

########## 4. Funciones modernas (tmux ‚â•¬†3.2) ##############################
# Pop‚Äëup flotante: prefijo + p abre btop en una ventanita
bind p display-popup -E btop

# √Årbol interactivo colapsado: prefijo + s
bind s choose-tree

########## 5. Copiado al portapapeles del sistema ##########################
# Ajusta wl-copy ‚Üí pbcopy (macOS) o clip.exe (WSL/Windows) seg√∫n tu entorno
set -g copy-command "wl-copy"
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "wl-copy"

########## 6. Sincronizar panes (escribe en todos) #########################
bind y set-window-option synchronize-panes \;\
        display-message 'sync #{?pane_synchronized,on,off}'

########## 7. Plugins (TPM + Resurrect + Continuum) ########################
# Instala TPM:  git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'   # Guarda/restaura sesiones
set -g @plugin 'tmux-plugins/tmux-continuum'   # Autoguardado peri√≥dico

# Opciones populares de Resurrect / Continuum
set -g @continuum-restore 'on'
set -g @resurrect-capture-pane-contents 'on'

# Carga TPM (d√©jalo al final del archivo)
run '~/.tmux/plugins/tpm/tpm'
############################################################################
# Recarga con:  Ctrl‚Äëb :source-file ~/.tmux.conf ‚Üµ
# Instala plugins: Ctrl‚Äëb I     Restaura: Ctrl‚Äëb Ctrl‚Äër     Fuerza backup: Ctrl‚Äëb Ctrl‚Äës
############################################################################